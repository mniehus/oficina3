

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fundamentals &mdash; oficina3  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Step Zero" href="stepZero.html" />
    <link rel="prev" title="Inverted Pendulum with Reaction Wheel" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            oficina3
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">oficina3</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../readme.html">LEFA Oficina 3 ‚Äì Laborat√≥rio de Estima√ß√£o e Controlo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#lefa-oficina-3-estimation-and-control-lab">LEFA Oficina 3 ‚Äì Estimation and Control Lab</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Projeto 1</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../project1/readme.html">Aeropendulum</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Projeto 2</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../project2/readme.html">Zumo-32U4</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project 3</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Inverted Pendulum with Reaction Wheel</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Fundamentals</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dynamics">Dynamics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#moment-of-inertia">Moment of Inertia</a></li>
<li class="toctree-l2"><a class="reference internal" href="#power-conversion">Power conversion</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dc-motor-basics">DC Motor Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sensor-basics">Sensor basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#controller">Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="#arduino-system-integration">Arduino System Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#programming">Programming</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="stepZero.html">Step Zero</a></li>
<li class="toctree-l1"><a class="reference internal" href="modelling.html">Modelling</a></li>
<li class="toctree-l1"><a class="reference internal" href="simulation.html">Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html#design-drivers">Design drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html#design-1">Design 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html#design-2">Design 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html#design-3">Design 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementation.html">Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">Tests</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../resources/resources.html">Resources</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">oficina3</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Fundamentals</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/project3/fundamentals.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="fundamentals">
<h1>Fundamentals<a class="headerlink" href="#fundamentals" title="Link to this heading">ÔÉÅ</a></h1>
<p>This section introduces the fundamental concepts and equations behind the Reaction Wheel Inverted Pendulum. It combines physics, electromechanics, and control theory.</p>
<hr class="docutils" />
<section id="dynamics">
<h2>Dynamics<a class="headerlink" href="#dynamics" title="Link to this heading">ÔÉÅ</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Quantity</p></th>
<th class="head"><p>Linear</p></th>
<th class="head"><p>Angular</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Position</p></td>
<td><p><span class="math notranslate nohighlight">\(x\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\theta\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>Velocity</p></td>
<td><p><span class="math notranslate nohighlight">\(v = \frac{dx}{dt}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\omega = \frac{d\theta}{dt}\)</span></p></td>
</tr>
<tr class="row-even"><td><p>Acceleration</p></td>
<td><p><span class="math notranslate nohighlight">\(a = \frac{dv}{dt}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\alpha = \frac{d\omega}{dt}\)</span></p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p><strong>Newton‚Äôs Laws for Linear Motion</strong></p>
<div class="math notranslate nohighlight">
\[ 
F = m a
\]</div>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(F\)</span>: Force (N)</p></li>
<li><p><span class="math notranslate nohighlight">\(m\)</span>: Mass (kg)</p></li>
<li><p><span class="math notranslate nohighlight">\(a\)</span>: Acceleration (m/s¬≤)</p></li>
</ul>
<p><strong>Newton‚Äôs Laws for Rotational Motion</strong></p>
<div class="math notranslate nohighlight">
\[ 
\tau = I \alpha
\]</div>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\tau\)</span>: Torque (Nm)</p></li>
<li><p><span class="math notranslate nohighlight">\(I\)</span>: Moment of inertia (kg¬∑m¬≤)</p></li>
<li><p><span class="math notranslate nohighlight">\(\alpha\)</span>: Angular acceleration (rad/s¬≤)</p></li>
</ul>
<p>To rotate a body with <strong>friction torque</strong> <span class="math notranslate nohighlight">\(\tau_f\)</span>:</p>
<div class="math notranslate nohighlight">
\[ 
\tau_{\text{net}} = I \alpha + \tau_f
\]</div>
<p>A spinning disk induces a <strong>reaction torque</strong>:</p>
<div class="math notranslate nohighlight">
\[ 
\tau_{\text{reaction}} = -I \alpha
\]</div>
<p>Note the correspondence of linear vs angular motion parameters.</p>
</section>
<section id="moment-of-inertia">
<h2>Moment of Inertia<a class="headerlink" href="#moment-of-inertia" title="Link to this heading">ÔÉÅ</a></h2>
<p>For a <strong>solid disk</strong> of mass <span class="math notranslate nohighlight">\(m\)</span> and radius <span class="math notranslate nohighlight">\(r\)</span>, rotating about its center:</p>
<div class="math notranslate nohighlight">
\[ 
I = \frac{1}{2} m r^2
 \]</div>
<p>For a <strong>solid wheel</strong> (annular disk) of mass <span class="math notranslate nohighlight">\(m\)</span>, inner radius <span class="math notranslate nohighlight">\(R_i\)</span> and outer radius <span class="math notranslate nohighlight">\(R_a\)</span>:</p>
<div class="math notranslate nohighlight">
\[ 
I = \frac{1}{2} m (R_i^2 + R_a^2)
 \]</div>
<p>For a <strong>point mass</strong> <span class="math notranslate nohighlight">\(M\)</span> at a distance <span class="math notranslate nohighlight">\(L\)</span> from the axis of rotation (e.g., for a pendulum):</p>
<div class="math notranslate nohighlight">
\[ 
I = M L^2
 \]</div>
<p>For a <strong>general rotationally symmetric object</strong> with radial mass density <span class="math notranslate nohighlight">\(\rho(r)\)</span> (in kg/m):</p>
<div class="math notranslate nohighlight">
\[ 
I = \int_{R_i}^{R_a} \rho(r) \, r^2 \cdot 2\pi r \, dr = 2\pi \int_{R_i}^{R_a} \rho(r) \, r^3 \, dr
 \]</div>
<p>For a <strong>composite object</strong> made of multiple components with known moments of inertia <span class="math notranslate nohighlight">\(I_1, I_2, \dots, I_n\)</span>:</p>
<div class="math notranslate nohighlight">
\[ 
I_{\text{total}} = I_1 + I_2 + \dots + I_n = \sum_{i=1}^n I_i
 \]</div>
<p>üîó <a class="reference external" href="https://en.wikipedia.org/wiki/Moment_of_inertia">Wikipedia: Moment of Inertia</a></p>
<p><strong>Measuring Moment of Inertia in the Lab</strong></p>
<p>The <strong>moment of inertia</strong> of an object can be determined experimentally using various methods. One simple and effective method is the <strong>torsional pendulum</strong> or <strong>rotational acceleration method</strong>.</p>
<p><strong>Method 1: Torsional Oscillation</strong></p>
<ol class="arabic">
<li><p><strong>Suspend</strong> the object from a thin wire or torsion spring, allowing it to rotate freely about a vertical axis.</p></li>
<li><p><strong>Measure the period</strong> <span class="math notranslate nohighlight">\(T\)</span> of small-angle oscillations.</p></li>
<li><p><strong>Determine the torsion constant</strong> <span class="math notranslate nohighlight">\(k\)</span> of the wire or system by calibrating with a known inertia or using a reference object.</p></li>
<li><p>Use the formula:</p></li>
<li><div class="math notranslate nohighlight">
\[ 
   I = \frac{T^2 k}{4\pi^2}
    \]</div>
<p>where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(I\)</span> is the moment of inertia,</p></li>
<li><p><span class="math notranslate nohighlight">\(T\)</span> is the oscillation period,</p></li>
<li><p><span class="math notranslate nohighlight">\(k\)</span> is the torsional stiffness.</p></li>
</ul>
</li>
</ol>
<p><strong>Method 2: Angular Acceleration</strong></p>
<ol class="arabic">
<li><p>Apply a <strong>known torque</strong> <span class="math notranslate nohighlight">\(\tau\)</span> (e.g., via a hanging mass and pulley).</p></li>
<li><p>Measure the resulting <strong>angular acceleration</strong> <span class="math notranslate nohighlight">\(\alpha\)</span> (using a rotary encoder or sensor).</p></li>
<li><p>Use Newton‚Äôs second law for rotation:</p>
<div class="math notranslate nohighlight">
\[ 
   I = \frac{\tau}{\alpha}
    \]</div>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\tau = r F\)</span>, where <span class="math notranslate nohighlight">\(F\)</span> is the force applied at radius <span class="math notranslate nohighlight">\(r\)</span>.</p></li>
</ul>
</li>
</ol>
</section>
<hr class="docutils" />
<section id="power-conversion">
<h2>Power conversion<a class="headerlink" href="#power-conversion" title="Link to this heading">ÔÉÅ</a></h2>
<p>In a rotating system, energy and power are governed by the following key relations.</p>
<p>The <strong>rotational kinetic energy</strong> of a spinning body is:</p>
<div class="math notranslate nohighlight">
\[ 
E_{\text{rot}} = \frac{1}{2} I \omega^2
 \]</div>
<p>where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(I\)</span> is the moment of inertia (in kg¬∑m¬≤),</p></li>
<li><p><span class="math notranslate nohighlight">\(\omega\)</span> is the angular velocity (in rad/s).</p></li>
</ul>
<p>The <strong>mechanical power</strong> delivered to or from a rotating body is:</p>
<div class="math notranslate nohighlight">
\[ 
P_{\text{mech}} = \tau \cdot \omega
 \]</div>
<p>where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\tau\)</span> is the torque (in N¬∑m),</p></li>
<li><p><span class="math notranslate nohighlight">\(\omega\)</span> is the angular velocity (in rad/s).</p></li>
</ul>
<p>In electromechanical systems (e.g. DC motor + disk), the mechanical power must come from electrical input power. If <span class="math notranslate nohighlight">\(\eta\)</span> is the efficiency of conversion:</p>
<div class="math notranslate nohighlight">
\[ 
P_{\text{elec}} = \frac{P_{\text{mech}}}{\eta}
\]</div>
<p>and</p>
<div class="math notranslate nohighlight">
\[ 
P_{\text{elec}} = V \cdot I
\]</div>
<p>where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(V\)</span> is the supply voltage (in volts),</p></li>
<li><p><span class="math notranslate nohighlight">\(I\)</span> is the current (in amperes),</p></li>
<li><p><span class="math notranslate nohighlight">\(\eta\)</span> is the efficiency (e.g. 0.8 for 80%).</p></li>
</ul>
<p><strong>Numerical Example</strong></p>
<p>Let‚Äôs consider a <strong>solid disk</strong> with:</p>
<ul class="simple">
<li><p>mass <span class="math notranslate nohighlight">\(m = 1\)</span> kg,</p></li>
<li><p>radius <span class="math notranslate nohighlight">\(r = 0.05\)</span> m (10 cm diameter),</p></li>
<li><p>angular velocity <span class="math notranslate nohighlight">\(\omega = 2\pi\)</span> rad/s (i.e., 1 turn/s),</p></li>
<li><p>angular acceleration <span class="math notranslate nohighlight">\(\alpha = 2\pi\)</span> rad/s¬≤,</p></li>
<li><p>efficiency <span class="math notranslate nohighlight">\(\eta = 0.8\)</span>.</p></li>
</ul>
<ol class="arabic simple">
<li><p>Moment of Inertia of the Disk:</p></li>
</ol>
<div class="math notranslate nohighlight">
\[ 
I = \frac{1}{2} m r^2 = \frac{1}{2} \cdot 1 \cdot (0.05)^2 = 0.00125 \ kg¬∑m^2
 \]</div>
<ol class="arabic simple" start="2">
<li><p>Kinetic Energy of Rotation:</p></li>
</ol>
<div class="math notranslate nohighlight">
\[ 
E_{\text{rot}} = \frac{1}{2} I \omega^2 = \frac{1}{2} \cdot 0.00125 \cdot (2\pi)^2 \approx 0.049 \ \text{J}
 \]</div>
<ol class="arabic simple" start="3">
<li><p>Required Torque:
Assuming angular acceleration <span class="math notranslate nohighlight">\(\alpha = 2\pi\)</span> rad/s¬≤:</p></li>
</ol>
<div class="math notranslate nohighlight">
\[ 
\tau = I \cdot \alpha = 0.00125 \cdot 2\pi \approx 0.00785 \ N¬∑m
 \]</div>
<ol class="arabic simple" start="4">
<li><p>Mechanical Power:</p></li>
</ol>
<div class="math notranslate nohighlight">
\[ 
P_{\text{mech}} = \tau \cdot \omega = 0.00785 \cdot 2\pi \approx 0.049 \ \text{W}
 \]</div>
<ol class="arabic simple" start="5">
<li><p>Electrical Power Required:
With 80% efficiency:</p></li>
</ol>
<div class="math notranslate nohighlight">
\[ 
P_{\text{elec}} = \frac{P_{\text{mech}}}{\eta} = \frac{0.049}{0.8} \approx 0.061 \ \text{W}
 \]</div>
<blockquote>
<div><p>This example highlights the relevance of inertia and torque in system design. Note also that the power levels required to drive mechanical motion are typically beyond what basic microcontrollers can provide, and as such it is required to use a transistor based driver circuit between the Arduino and the Dc motors.</p>
</div></blockquote>
</section>
<section id="dc-motor-basics">
<h2>DC Motor Basics<a class="headerlink" href="#dc-motor-basics" title="Link to this heading">ÔÉÅ</a></h2>
<p>DC motors convert electrical energy into mechanical torque and rotational motion. The fundamental equations are:</p>
<ul>
<li><p>Torque generated:</p></li>
<li><div class="math notranslate nohighlight">
\[ 
  \tau = k_t \cdot I
   \]</div>
</li>
<li><p>Voltage across the motor:</p></li>
<li><div class="math notranslate nohighlight">
\[ 
  V = k_e \cdot \omega + I \cdot R
   \]</div>
</li>
</ul>
<p>Where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\tau\)</span>: torque (N¬∑m)</p></li>
<li><p><span class="math notranslate nohighlight">\(I\)</span>: current (A)</p></li>
<li><p><span class="math notranslate nohighlight">\(V\)</span>: voltage (V)</p></li>
<li><p><span class="math notranslate nohighlight">\(\omega\)</span>: angular velocity (rad/s)</p></li>
<li><p><span class="math notranslate nohighlight">\(k_t\)</span>: torque constant (N¬∑m/A)</p></li>
<li><p><span class="math notranslate nohighlight">\(k_e\)</span>: back-EMF constant (V¬∑s/rad)</p></li>
<li><p><span class="math notranslate nohighlight">\(R\)</span>: motor coil resistance (Œ©)</p></li>
</ul>
<p><strong>Typical Parameters</strong></p>
<p>To correctly simulate and use a DC motor in a control system, you must know or estimate the following key parameters:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Symbol</p></th>
<th class="head"><p>Quantity</p></th>
<th class="head"><p>Units</p></th>
<th class="head"><p>Typical Range (Lab Motors)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(\tau\)</span></p></td>
<td><p>Torque</p></td>
<td><p>N¬∑m</p></td>
<td><p>0.01 ‚Äì 0.2 N¬∑m</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(I\)</span></p></td>
<td><p>Current</p></td>
<td><p>A</p></td>
<td><p>0.2 ‚Äì 2 A</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(V\)</span></p></td>
<td><p>Voltage</p></td>
<td><p>V</p></td>
<td><p>3 ‚Äì 24 V</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(\omega\)</span></p></td>
<td><p>Angular speed</p></td>
<td><p>rad/s</p></td>
<td><p>100 ‚Äì 2000 rad/s</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(k_t\)</span></p></td>
<td><p>Torque constant</p></td>
<td><p>N¬∑m/A</p></td>
<td><p>0.01 ‚Äì 0.1 N¬∑m/A</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(k_e\)</span></p></td>
<td><p>Back-EMF constant</p></td>
<td><p>V¬∑s/rad</p></td>
<td><p>0.01 ‚Äì 0.1 V¬∑s/rad</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(R\)</span></p></td>
<td><p>Coil resistance</p></td>
<td><p>Œ©</p></td>
<td><p>0.5 ‚Äì 10 Œ©</p></td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>Most of these values are provided in the motor‚Äôs datasheet:</p>
<ul class="simple">
<li><p><strong><span class="math notranslate nohighlight">\(k_t\)</span> and <span class="math notranslate nohighlight">\(k_e\)</span></strong>: Often given directly. For brushed motors, these are numerically equal (<span class="math notranslate nohighlight">\(k_t = k_e\)</span>) if using SI units.</p></li>
<li><p><strong>Stall torque</strong> (<span class="math notranslate nohighlight">\(\tau_{\text{stall}}\)</span>): Maximum torque at zero speed.</p></li>
<li><p><strong>No-load speed</strong> (<span class="math notranslate nohighlight">\(\omega_{\text{free}}\)</span>): Speed at zero torque.</p></li>
<li><p><strong>Stall current</strong> (<span class="math notranslate nohighlight">\(I_{\text{stall}}\)</span>): Current at zero speed and maximum torque.</p></li>
<li><p><strong>Resistance</strong>: <span class="math notranslate nohighlight">\(R = V_{\text{stall}} / I_{\text{stall}}\)</span></p></li>
</ul>
<p>From these, you can compute:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(k_t = \tau_{\text{stall}} / I_{\text{stall}}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(k_e = V_{\text{free}} / \omega_{\text{free}}\)</span></p></li>
</ul>
<p><strong>Trade-Offs in Motor Selection</strong></p>
<p>The performance of a DC motor is a balance between torque and speed. Key considerations:</p>
<ul class="simple">
<li><p>Higher torque ‚Üí requires more current.</p></li>
<li><p>Higher speed ‚Üí increases back-EMF and voltage needs.</p></li>
<li><p>Higher current ‚Üí increases resistive losses (<span class="math notranslate nohighlight">\(I^2 R\)</span>) and risk of overheating.</p></li>
<li><p>Motor constants (<span class="math notranslate nohighlight">\(k_t\)</span>, <span class="math notranslate nohighlight">\(k_e\)</span>) are typically fixed for a given model.</p></li>
</ul>
<blockquote>
<div><p>Always respect <strong>maximum ratings</strong>: exceeding current, voltage, or power may permanently damage the motor.</p>
</div></blockquote>
<p><strong>Gears</strong></p>
<p>Gears can be used to <strong>adapt motor output</strong> to desired speed and torque levels.</p>
<p><strong>Basic Gear Equations</strong></p>
<ul>
<li><p>Gear ratio:</p></li>
<li><div class="math notranslate nohighlight">
\[ 
  R = \frac{N_{\text{out}}}{N_{\text{in}}}
   \]</div>
<p>where <span class="math notranslate nohighlight">\(N\)</span> is the number of teeth or diameter.</p>
</li>
<li><p>Output torque:</p></li>
<li><div class="math notranslate nohighlight">
\[ 
  \tau_{\text{out}} = R \cdot \tau_{\text{in}}
   \]</div>
</li>
<li><p>Output speed:</p></li>
<li><div class="math notranslate nohighlight">
\[ 
  \omega_{\text{out}} = \frac{\omega_{\text{in}}}{R}
   \]</div>
</li>
</ul>
<p><strong>Why Use Gears?</strong></p>
<ul class="simple">
<li><p><strong>Increase torque</strong> at the cost of lower speed.</p></li>
<li><p><strong>Reduce load</strong> on the motor to avoid overheating.</p></li>
<li><p><strong>Match the dynamics</strong> of the controlled system (e.g. pendulum).</p></li>
</ul>
<p><strong>Pulleys (with belts)</strong> provide similar mechanical advantages as gears.They are quieter than gears, and the distance between shafts is more flexible, so systems with pulleys and belts they are more simple to design and align. At the same time, they are less precise (risk of belt slippage), and limited to moderate torque applications.</p>
<p><strong>Example: Gear Matching</strong></p>
<p>Suppose your pendulum needs:</p>
<ul class="simple">
<li><p>Torque of <span class="math notranslate nohighlight">\(0.1\)</span> N¬∑m</p></li>
<li><p>Speed around <span class="math notranslate nohighlight">\(30\)</span> rad/s</p></li>
</ul>
<p>But your available motor produces:</p>
<ul class="simple">
<li><p>Torque of <span class="math notranslate nohighlight">\(0.02\)</span> N¬∑m</p></li>
<li><p>Speed of <span class="math notranslate nohighlight">\(150\)</span> rad/s</p></li>
</ul>
<p>Then use a gear ratio of:</p>
<div class="math notranslate nohighlight">
\[ 
R = \frac{0.1}{0.02} = 5
 \]</div>
<p>This brings output torque up to <span class="math notranslate nohighlight">\(0.1\)</span> N¬∑m, and reduces speed to:</p>
<div class="math notranslate nohighlight">
\[ 
\omega_{\text{out}} = \frac{150}{5} = 30 \ \text{rad/s}
 \]</div>
</section>
<hr class="docutils" />
<section id="sensor-basics">
<h2>Sensor basics<a class="headerlink" href="#sensor-basics" title="Link to this heading">ÔÉÅ</a></h2>
<p><strong>Magnetic Position Sensor (AS5600)</strong></p>
<ul class="simple">
<li><p>Contactless rotary sensor using a magnetic field.</p></li>
<li><p>Measures absolute angle with high resolution.</p></li>
<li><p>Outputs via I2C or PWM.</p></li>
</ul>
<p><a class="reference external" href="https://ams.com/as5600">AS5600 Datasheet</a></p>
</section>
<hr class="docutils" />
<section id="controller">
<h2>Controller<a class="headerlink" href="#controller" title="Link to this heading">ÔÉÅ</a></h2>
<p>A control system aims to keep the pendulum balanced using feedback.</p>
<p>Main Elements</p>
<ul class="simple">
<li><p><strong>Plant</strong>: The physical system to be controlled (e.g., pendulum)</p></li>
<li><p><strong>Controller</strong>: Algorithm producing control signals</p></li>
<li><p><strong>Sensor</strong>: Measures the system state</p></li>
<li><p><strong>Actuator</strong>: Applies control input (motor)</p></li>
<li><p><strong>Feedback</strong>: Uses sensor data to adjust behavior</p></li>
</ul>
<p>Feedback Control</p>
<p>Continuously reduces error by adjusting inputs based on outputs.</p>
<ul class="simple">
<li><p><strong>Bang-bang</strong>: All-or-nothing control; fast but unstable.</p></li>
<li><p><strong>PID</strong>: Combines:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[ 
  u(t) = K_p e(t) + K_i \int e(t) \, dt + K_d \frac{de(t)}{dt}
 \]</div>
<ul>
<li><p><strong>LQR</strong>: Uses optimal gains to minimize cost function:</p></li>
<li><div class="math notranslate nohighlight">
\[ 
  u = -Kx
   \]</div>
<p>where <span class="math notranslate nohighlight">\(x\)</span> is the system state and <span class="math notranslate nohighlight">\(K\)</span> is the gain matrix.</p>
</li>
</ul>
</section>
<section id="arduino-system-integration">
<h2>Arduino System Integration<a class="headerlink" href="#arduino-system-integration" title="Link to this heading">ÔÉÅ</a></h2>
<p>Arduino microcontrollers are widely used for real-time control systems due to their simplicity, low cost, and large ecosystem of libraries and tutorials. In this project, the Arduino is responsible for:</p>
<ul class="simple">
<li><p>Reading sensor data (e.g., from the AS5600 magnetic rotary sensor)</p></li>
<li><p>Running the control algorithm (Bang-Bang, PID, or LQR)</p></li>
<li><p>Sending the command to the motor driver to actuate the reaction wheel</p></li>
</ul>
<p><strong>Typical Setup Components</strong></p>
<ul class="simple">
<li><p><strong>Microcontroller</strong>: Arduino Uno / Nano / Mega</p></li>
<li><p><strong>Sensor</strong>: AS5600 magnetic rotary position sensor (via I2C)</p></li>
<li><p><strong>Actuator</strong>: Brushed DC motor + motor driver (e.g., L298N or TB6612FNG)</p></li>
<li><p><strong>Power supply</strong>: Appropriate for motor and controller (check ratings!)</p></li>
<li><p><strong>Other</strong>: Wires, resistors, capacitors, breadboards or PCBs</p></li>
</ul>
</section>
<section id="programming">
<h2>Programming<a class="headerlink" href="#programming" title="Link to this heading">ÔÉÅ</a></h2>
<p>Migrating from Python Simulation to Arduino Deployment</p>
<p>In your development process, you will first simulate the control system (e.g., pendulum dynamics and reaction wheel behavior) using Python. This allows you to:</p>
<ul class="simple">
<li><p>Explore different parameters (e.g., control gains, system constants)</p></li>
<li><p>Test various controllers (Bang-Bang, PID, LQR)</p></li>
<li><p>Validate system stability in idealized and perturbed conditions</p></li>
</ul>
<p>Once the control strategy is selected and tuned in Python, <strong>you will port the core control logic to C/C++ in the Arduino IDE</strong>:</p>
<ol class="arabic simple">
<li><p><strong>Isolate the control algorithm</strong> from your Python code (e.g., a function that outputs control action given angle and velocity).</p></li>
<li><p><strong>Rewrite this logic in Arduino-compatible C++</strong>, respecting memory and computation constraints.</p></li>
<li><p>Replace Python‚Äôs simulated sensor and motor interfaces with real-time reads from the AS5600 and motor driver control (e.g., <code class="docutils literal notranslate"><span class="pre">analogWrite()</span></code> or <code class="docutils literal notranslate"><span class="pre">digitalWrite()</span></code>).</p></li>
<li><p>Use Arduino‚Äôs <code class="docutils literal notranslate"><span class="pre">loop()</span></code> and <code class="docutils literal notranslate"><span class="pre">millis()</span></code> to structure periodic execution of your control loop (e.g., 100 Hz update rate).</p></li>
<li><p>Calibrate your sensors and actuators to reflect real-world behavior.</p></li>
</ol>
<blockquote>
<div><p>Real hardware behaves differently than simulations ‚Äî expect to tune your controller gains again!</p>
</div></blockquote>
<p>By mirroring your software architecture between simulation and deployment, you ensure a smoother transition and better reuse of your logic.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="introduction.html" class="btn btn-neutral float-left" title="Inverted Pendulum with Reaction Wheel" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="stepZero.html" class="btn btn-neutral float-right" title="Step Zero" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, mniehus.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>