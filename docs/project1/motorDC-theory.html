

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Motor DC (theory) &mdash; oficina3  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
      <script src="../_static/design-tabs.js?v=f930bc37"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Motor DC (drive)" href="motorDC-lab.html" />
    <link rel="prev" title="Aeropendulum (theory)" href="pendulum-theory.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            oficina3
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">oficina3</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../readme.html">LEFA Oficina 3 – Laboratório de Estimação e Controlo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#lefa-oficina-3-estimation-and-control-lab">LEFA Oficina 3 – Estimation and Control Lab</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Projeto 1</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="aeropendulum.html">Projeto 1: Desenvolvimento e Teste de um Aeropêndulo</a></li>
<li class="toctree-l1"><a class="reference internal" href="analogies.html">Analogias</a></li>
<li class="toctree-l1"><a class="reference internal" href="pendulum-theory.html">Aeropendulum (theory)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Motor DC (theory)</a></li>
<li class="toctree-l1"><a class="reference internal" href="motorDC-lab.html">Motor DC (drive)</a></li>
<li class="toctree-l1"><a class="reference internal" href="encoder.html">Encoder</a></li>
<li class="toctree-l1"><a class="reference internal" href="coding.html">Programar</a></li>
<li class="toctree-l1"><a class="reference internal" href="motorCalib-PT.html">[PT] Máquinas de Estados aplicadas à Calibração de Motor DC</a></li>
<li class="toctree-l1"><a class="reference internal" href="motorCalib-EN.html">[EN] State-Machines applied to DC Motor Calibration</a></li>
<li class="toctree-l1"><a class="reference internal" href="controller.html">PID Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="integration.html">Integração do Sistema</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Projeto 2</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../project2/readme.html">Carro programável</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project 3</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../project3/readme.html">Inverted Pendulum</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">oficina3</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Motor DC (theory)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/project1/motorDC-theory.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Motor-DC-(theory)">
<h1>Motor DC (theory)<a class="headerlink" href="#Motor-DC-(theory)" title="Link to this heading"></a></h1>
<p>DC motors convert electrical energy into mechanical torque and rotational motion. The fundamental equations are:</p>
<ul>
<li><p>Torque generated:</p>
<div class="math notranslate nohighlight">
\[\tau = k_t \cdot I\]</div>
</li>
<li><p>Voltage across the motor:</p>
<div class="math notranslate nohighlight">
\[V = k_e \cdot \omega + I \cdot R\]</div>
</li>
</ul>
<p>Where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\tau\)</span>: torque (N·m)</p></li>
<li><p><span class="math notranslate nohighlight">\(I\)</span>: current (A)</p></li>
<li><p><span class="math notranslate nohighlight">\(V\)</span>: voltage (V)</p></li>
<li><p><span class="math notranslate nohighlight">\(\omega\)</span>: angular velocity (rad/s)</p></li>
<li><p><span class="math notranslate nohighlight">\(k_t\)</span>: torque constant (N·m/A)</p></li>
<li><p><span class="math notranslate nohighlight">\(k_e\)</span>: back-EMF constant (V·s/rad)</p></li>
<li><p><span class="math notranslate nohighlight">\(R\)</span>: motor coil resistance (Ω)</p></li>
</ul>
<p><strong>DC motor model</strong></p>
<p><img alt="DC motor diagrams" src="../_images/dcmotor.png" /></p>
<p>Parameter</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">va</span></code> - Applied Voltage</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">R</span></code> - Resistance</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">L</span></code> - Inductance</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">i</span></code> - Current</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">b</span></code> - Damping coefficient</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">J</span></code> - Rotor Inertia</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ke</span></code> - Back EMF constant</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kt</span></code> - Torque constant</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">θ</span></code> - Rotor shaft angle</p></li>
</ul>
<p><strong>Typical Parameters for steady-state</strong></p>
<p>To correctly simulate and use a DC motor in a control system, you must know or estimate the following key parameters:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Symbol</p></th>
<th class="head"><p>Quantity</p></th>
<th class="head"><p>Units</p></th>
<th class="head"><p>Typical Range (Lab Motors)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(\tau\)</span></p></td>
<td><p>Torque</p></td>
<td><p>N·m</p></td>
<td><p>0.01 – 0.2 N·m</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(I\)</span></p></td>
<td><p>Current</p></td>
<td><p>A</p></td>
<td><p>0.2 – 2 A</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(V\)</span></p></td>
<td><p>Voltage</p></td>
<td><p>V</p></td>
<td><p>3 – 24 V</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(\omega\)</span></p></td>
<td><p>Angular speed</p></td>
<td><p>rad/s</p></td>
<td><p>100 – 2000 rad/s</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(k_t\)</span></p></td>
<td><p>Torque constant</p></td>
<td><p>N·m/A</p></td>
<td><p>0.01 – 0.1 N·m/A</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(k_e\)</span></p></td>
<td><p>Back-EMF constant</p></td>
<td><p>V·s/rad</p></td>
<td><p>0.01 – 0.1 V·s/rad</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(R\)</span></p></td>
<td><p>Coil resistance</p></td>
<td><p>Ω</p></td>
<td><p>0.5 – 10 Ω</p></td>
</tr>
</tbody>
</table>
<p>Most of these values are provided in the motor’s datasheet:</p>
<ul class="simple">
<li><p><strong>:math:`k_t`</strong> and <strong>:math:`k_e`</strong>: Often given directly. For brushed motors, these are numerically equal (<span class="math notranslate nohighlight">\(k_t = k_e\)</span>) if using SI units.</p></li>
<li><p><strong>Stall torque</strong> (<span class="math notranslate nohighlight">\(\tau_{\text{stall}}\)</span>): Maximum torque at zero speed.</p></li>
<li><p><strong>No-load speed</strong> (<span class="math notranslate nohighlight">\(\omega_{\text{free}}\)</span>): Speed at zero torque.</p></li>
<li><p><strong>Stall current</strong> (<span class="math notranslate nohighlight">\(I_{\text{stall}}\)</span>): Current at zero speed and maximum torque.</p></li>
<li><p><strong>Resistance</strong>: <span class="math notranslate nohighlight">\(R = V_{\text{stall}} / I_{\text{stall}}\)</span></p></li>
</ul>
<p>From these, you can compute:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(k_t = \tau_{\text{stall}} / I_{\text{stall}}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(k_e = V_{\text{free}} / \omega_{\text{free}}\)</span></p></li>
</ul>
<p><strong>Trade-Offs in Motor Selection</strong></p>
<p>The performance of a DC motor is a balance between torque and speed. Key considerations:</p>
<ul class="simple">
<li><p>Higher torque → requires more current.</p></li>
<li><p>Higher speed → increases back-EMF and voltage needs.</p></li>
<li><p>Higher current → increases resistive losses (<span class="math notranslate nohighlight">\(I^2 R\)</span>) and risk of overheating.</p></li>
<li><p>Motor constants (<span class="math notranslate nohighlight">\(k_t\)</span>, <span class="math notranslate nohighlight">\(k_e\)</span>) are typically fixed for a given model.</p></li>
</ul>
<blockquote>
<div><p>Always respect <strong>maximum ratings</strong>: exceeding current, voltage, or power may permanently damage the motor.</p>
</div></blockquote>
<p><strong>Dynamical model</strong></p>
<p>Electrical part</p>
<p>  <span class="math notranslate nohighlight">\(va = R i + L \frac{di}{dt} + k_e \frac{dθ}{dt}\)</span></p>
<p>Electromechanical Conversion</p>
<p>  <span class="math notranslate nohighlight">\(T_{m} = k_t i\)</span></p>
<p>Mechanical Part (inertia plus load)</p>
<p>  <span class="math notranslate nohighlight">\(T_{m} = b \frac{dθ}{dt} + J\frac{d^2θ}{dt^2}\)</span></p>
<p>If required, mechanical part can also include Coulomb (static) or Reynolds (aerodynamic) friction</p>
<p><strong>DC motor - regime estacionário</strong></p>
<p>There are two time constants associated to DC motors in the second order model:</p>
<ul class="simple">
<li><p>the electrical time constant <span class="math notranslate nohighlight">\(tau_{el}=L/R\)</span>, of order 0.1 ms</p></li>
<li><p>the mechanical time constant <span class="math notranslate nohighlight">\(tau_{mech}=J/B\)</span>, of order 100 ms</p></li>
</ul>
<p>In many if not most control projects, a stationary (steady state) model is adequate.</p>
<p>By zeroing the time variations (dynamic derivatives):</p>
<div class="math notranslate nohighlight">
\[L \frac{di}{dt}=0\]</div>
<div class="math notranslate nohighlight">
\[J\frac{dω}{dt}=0\]</div>
<p>The electrical part becomes</p>
<div class="math notranslate nohighlight">
\[va = R i + k_e ω\]</div>
<p>The mechanical part becomes</p>
<div class="math notranslate nohighlight">
\[T_{m} = k_t i\]</div>
<p>A typical (minimal) load:</p>
<div class="math notranslate nohighlight">
\[T_{m} = b ω\]</div>
<p><strong>Speed-voltage transfer curve</strong></p>
<div class="math notranslate nohighlight">
\[va = R \frac{b ω}{k_t} + k_e ω = (1+\frac{Rb}{k_e k_t}) k_e ω\]</div>
<div class="math notranslate nohighlight">
\[\boxed{ ω = \frac{va}{(1+\frac{Rb}{k_e k_t}) k_e}}\]</div>
<p>This linear correlation between speed <span class="math notranslate nohighlight">\(\omega\)</span> and applied Voltage <span class="math notranslate nohighlight">\(va\)</span> is called the <strong>speed-voltage transfer curve</strong>.</p>
<p>For a given motor, the proportionality constant is given by</p>
<div class="math notranslate nohighlight">
\[\frac{1}{(1+\frac{R b}{k_e k_t})k_e}\]</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Voltage range</span>
<span class="n">va</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

<span class="c1"># Electrical &amp; mechanical parameters (typical/representative)</span>
<span class="n">R</span>  <span class="o">=</span> <span class="mf">2.7e0</span>      <span class="c1"># Armature resistance [ohm]</span>
<span class="n">B</span>  <span class="o">=</span> <span class="mf">3.0e-8</span>     <span class="c1"># Viscous damping coeff. [N·m·s/rad]</span>
<span class="n">ke</span> <span class="o">=</span> <span class="mf">7.5e-4</span>     <span class="c1"># Back-EMF constant [V·s/rad]  (== V/(rad/s))</span>
<span class="n">kt</span> <span class="o">=</span> <span class="mf">7.5e-4</span>     <span class="c1"># Torque constant [N·m/A]      (≈ ke in SI)</span>

<span class="c1"># Speed-voltage static transfer curve</span>
<span class="n">propconst</span><span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">((</span><span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="n">R</span> <span class="o">*</span> <span class="n">B</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">ke</span> <span class="o">*</span> <span class="n">kt</span><span class="p">))</span> <span class="o">*</span> <span class="n">ke</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">propconst</span><span class="p">)</span>
<span class="n">omega</span> <span class="o">=</span>  <span class="n">propconst</span><span class="o">*</span><span class="n">va</span><span class="o">*</span><span class="mi">60</span><span class="o">/</span><span class="mf">6.28</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">va</span><span class="p">,</span> <span class="n">omega</span><span class="o">*</span><span class="mi">60</span><span class="o">/</span><span class="mf">6.28</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Voltage $v_a$ (V)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Speed $</span><span class="se">\\</span><span class="s1">omega$ (rpm)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Example of Speed-Voltage Transfer Curve&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1165.5011655011656
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/project1_motorDC-theory_6_1.png" src="../_images/project1_motorDC-theory_6_1.png" />
</div>
</div>
<p><strong>Speed-Torque Curve (load line)</strong></p>
<div class="math notranslate nohighlight">
\[T_{m} =  \frac{k_t}{R} (va-k_e ω)\]</div>
<div class="math notranslate nohighlight">
\[\boxed{ω = \frac{va}{k_e}-\frac{R}{k_e k_t}T_m}\]</div>
<p>This linear inverse correlation between speed <span class="math notranslate nohighlight">\(\omega\)</span> and torque <span class="math notranslate nohighlight">\(T_m\)</span> is called the <strong>load line</strong>.</p>
<p>For a given motor:</p>
<ul class="simple">
<li><p>the slope <span class="math notranslate nohighlight">\(-\frac{R}{k_e k_t}\)</span> is constant.</p></li>
<li><p>the vertical offset <span class="math notranslate nohighlight">\(\frac{va}{k_e}\)</span> is proportional to the applied Voltage</p></li>
</ul>
<p>Load line reference points:</p>
<p>Maximum speed at zero load and torque:</p>
<div class="math notranslate nohighlight">
\[ω(T_m=0) = \frac{va}{k_e} = ω_{max}\]</div>
<p>Maximum torque at full load and zero speed:</p>
<div class="math notranslate nohighlight">
\[T_m(ω=0) = \frac{k_t}{R} va = k_t I_{stall}= Tm_{max}\]</div>
<p>The point of maximum energy transfer is in the center point of the load line:</p>
<div class="math notranslate nohighlight">
\[P_{max} = \frac{ω_{max}} {2} \frac{Tm_{max}} {2}\]</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Parameters</span>
<span class="n">va</span> <span class="o">=</span> <span class="mi">5</span>            <span class="c1">#applied voltage</span>

<span class="c1"># Torque range</span>
<span class="n">Tm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">kt</span><span class="o">*</span><span class="n">va</span><span class="o">/</span><span class="n">R</span> <span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

<span class="c1"># Electrical &amp; mechanical parameters (typical/representative)</span>
<span class="n">R</span>  <span class="o">=</span> <span class="mf">2.7e0</span>      <span class="c1"># Armature resistance [ohm]</span>
<span class="n">B</span>  <span class="o">=</span> <span class="mf">3.0e-8</span>     <span class="c1"># Viscous damping coeff. [N·m·s/rad]</span>
<span class="n">ke</span> <span class="o">=</span> <span class="mf">7.5e-4</span>     <span class="c1"># Back-EMF constant [V·s/rad]  (== V/(rad/s))</span>
<span class="n">kt</span> <span class="o">=</span> <span class="mf">7.5e-4</span>     <span class="c1"># Torque constant [N·m/A]      (≈ ke in SI)</span>

<span class="c1"># Speed-torque curve</span>
<span class="n">omega</span> <span class="o">=</span> <span class="n">va</span><span class="o">/</span><span class="n">ke</span> <span class="o">-</span> <span class="n">R</span> <span class="o">/</span> <span class="p">(</span><span class="n">ke</span> <span class="o">*</span> <span class="n">kt</span><span class="p">)</span> <span class="o">*</span> <span class="n">Tm</span>

<span class="c1"># Current curve</span>
<span class="n">Im</span><span class="o">=</span><span class="n">Tm</span><span class="o">/</span><span class="n">kt</span>

<span class="c1"># Power curve</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">omega</span> <span class="o">*</span> <span class="n">Tm</span>

<span class="c1"># Set axis limits</span>
<span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span> <span class="o">=</span> <span class="n">Tm</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">Tm</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="n">y_min</span><span class="p">,</span> <span class="n">y_max</span> <span class="o">=</span> <span class="n">omega</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">*</span><span class="mi">60</span><span class="o">/</span><span class="mf">6.28</span><span class="p">,</span> <span class="n">omega</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">*</span><span class="mi">60</span><span class="o">/</span><span class="mf">6.28</span>
<span class="n">p_min</span><span class="p">,</span> <span class="n">p_max</span> <span class="o">=</span> <span class="n">P</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">P</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="n">I_min</span><span class="p">,</span> <span class="n">I_max</span> <span class="o">=</span> <span class="n">Im</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">Im</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

<span class="c1"># Main plot: Torque vs Speed</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">Tm</span><span class="p">,</span> <span class="n">omega</span><span class="o">*</span><span class="mi">60</span><span class="o">/</span><span class="mf">6.28</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Load line&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">Tm</span><span class="p">,</span> <span class="n">Tm</span><span class="o">/</span><span class="n">B</span><span class="o">*</span><span class="mi">60</span><span class="o">/</span><span class="mf">6.28</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Actual load&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Speed $</span><span class="se">\\</span><span class="s1">omega$ (rpm)&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">labelcolor</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Torque $T_m$ (Nm)&#39;</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;bottom&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_position</span><span class="p">((</span><span class="s1">&#39;outward&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">y_min</span><span class="p">,</span> <span class="n">y_max</span><span class="p">)</span>

<span class="c1"># Additional y-axis for Current</span>
<span class="n">ax3</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">Tm</span><span class="p">,</span> <span class="n">Im</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Current&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_position</span><span class="p">((</span><span class="s1">&#39;outward&#39;</span><span class="p">,</span> <span class="mi">60</span><span class="p">))</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">ax1</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">())</span>
<span class="c1">#omega_ticks = ax1.get_yticks()</span>
<span class="c1">#ax3.set_yticks(omega_ticks)</span>
<span class="c1">#ax3.set_yticklabels([f&quot;{(ke*tick/(60/6.28) ):.1f}&quot; for tick in omega_ticks])</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Current $I$ (A)&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">labelcolor</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">I_min</span><span class="p">,</span> <span class="n">I_max</span><span class="p">)</span>  <span class="c1"># restrict power axis to min/max</span>

<span class="c1"># Additional y-axis for Power</span>
<span class="n">ax4</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">Tm</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Power&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Power $P$ (W)&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">labelcolor</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">p_min</span><span class="p">,</span> <span class="n">p_max</span><span class="p">)</span>  <span class="c1"># restrict power axis to min/max</span>

<span class="c1"># Grid on both x and y axes</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="c1">#ax4.legend()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Example of Speed-Torque Curve (load line)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<br/><br/><br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/project1_motorDC-theory_8_0.png" src="../_images/project1_motorDC-theory_8_0.png" />
</div>
</div>
<p><strong>Gears</strong></p>
<p>Gears can be used to <strong>adapt motor output</strong> to desired speed and torque levels.</p>
<p><strong>Basic Gear Equations</strong></p>
<ul>
<li><p>Gear ratio:</p>
<div class="math notranslate nohighlight">
\[R = \frac{N_{\text{out}}}{N_{\text{in}}}\]</div>
<p>where <span class="math notranslate nohighlight">\(N\)</span> is the number of teeth or diameter.</p>
</li>
<li><p>Output torque:</p>
<div class="math notranslate nohighlight">
\[\tau_{\text{out}} = R \cdot \tau_{\text{in}}\]</div>
</li>
<li><p>Output speed:</p>
<div class="math notranslate nohighlight">
\[\omega_{\text{out}} = \frac{\omega_{\text{in}}}{R}\]</div>
</li>
</ul>
<p><strong>Why Use Gears?</strong></p>
<ul class="simple">
<li><p><strong>Increase torque</strong> at the cost of lower speed.</p></li>
<li><p><strong>Reduce load</strong> on the motor to avoid overheating.</p></li>
<li><p><strong>Match the dynamics</strong> of the controlled system (e.g. pendulum).</p></li>
</ul>
<p><strong>Pulleys (with belts)</strong> provide similar mechanical advantages as gears.They are quieter than gears, and the distance between shafts is more flexible, so systems with pulleys and belts are more simple to design and align. At the same time, they are less precise (risk of belt slippage), and limited to moderate torque applications.</p>
<p><strong>Numerical Example: Gear Matching</strong></p>
<p>Suppose your pendulum needs:</p>
<ul class="simple">
<li><p>Torque of <span class="math notranslate nohighlight">\(0.1\)</span> N·m</p></li>
<li><p>Speed around <span class="math notranslate nohighlight">\(30\)</span> rad/s</p></li>
</ul>
<p>But your available motor produces:</p>
<ul class="simple">
<li><p>Torque of <span class="math notranslate nohighlight">\(0.02\)</span> N·m</p></li>
<li><p>Speed of <span class="math notranslate nohighlight">\(150\)</span> rad/s</p></li>
</ul>
<p>Then use a gear ratio of:</p>
<div class="math notranslate nohighlight">
\[R = \frac{0.1}{0.02} = 5\]</div>
<p>This brings output torque up to <span class="math notranslate nohighlight">\(0.1\)</span> N·m, and reduces speed to:</p>
<div class="math notranslate nohighlight">
\[\omega_{\text{out}} = \frac{150}{5} = 30 \ \text{rad/s}\]</div>
<p><strong>Typical values</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Typical small 3.7 V brushed coreless drone motor (e.g., 8.5×20 mm “8520”)</span>
<span class="c1"># SI units throughout.</span>

<span class="c1"># Electrical &amp; mechanical parameters (typical/representative)</span>
<span class="n">R</span>  <span class="o">=</span> <span class="mf">2.7e0</span>      <span class="c1"># Armature resistance [ohm]</span>
<span class="n">B</span>  <span class="o">=</span> <span class="mf">3.0e-8</span>     <span class="c1"># Viscous damping coeff. [N·m·s/rad]</span>
<span class="n">ke</span> <span class="o">=</span> <span class="mf">7.5e-4</span>     <span class="c1"># Back-EMF constant [V·s/rad]  (== V/(rad/s))</span>
<span class="n">kt</span> <span class="o">=</span> <span class="mf">7.5e-4</span>     <span class="c1"># Torque constant [N·m/A]      (≈ ke in SI)</span>

<span class="c1"># Convenience</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">math</span>
<span class="n">V_nom</span> <span class="o">=</span> <span class="mf">3.7</span>  <span class="c1"># nominal test voltage [V]</span>

<span class="c1"># Proportionality from DC voltage to angular speed at no external load:</span>
<span class="c1"># Steady-state with viscous friction only:</span>
<span class="c1">#   V = I*R + ke*ω,   kt*I = B*ω  → I = (B/kt)*ω</span>
<span class="c1">#   ⇒ V = (R*B/kt + ke) * ω  ⇒  ω/V = 1 / (ke + R*B/kt)</span>
<span class="n">omega_per_volt</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="n">ke</span> <span class="o">+</span> <span class="n">R</span><span class="o">*</span><span class="n">B</span><span class="o">/</span><span class="n">kt</span><span class="p">)</span>          <span class="c1"># [rad/s per V]</span>
<span class="n">rpm_per_volt</span>   <span class="o">=</span> <span class="n">omega_per_volt</span> <span class="o">*</span> <span class="mf">60.0</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>  <span class="c1"># [RPM per V]</span>

<span class="c1"># Nominal no-load speed at V_nom</span>
<span class="n">omega_0</span> <span class="o">=</span> <span class="n">omega_per_volt</span> <span class="o">*</span> <span class="n">V_nom</span>
<span class="n">rpm_0</span>   <span class="o">=</span> <span class="n">rpm_per_volt</span> <span class="o">*</span> <span class="n">V_nom</span>

<span class="c1"># Some sanity checks</span>
<span class="n">I_stall</span>   <span class="o">=</span> <span class="n">V_nom</span> <span class="o">/</span> <span class="n">R</span>                 <span class="c1"># [A]</span>
<span class="n">T_stall</span>   <span class="o">=</span> <span class="n">kt</span> <span class="o">*</span> <span class="n">I_stall</span>              <span class="c1"># [N·m]</span>
<span class="c1"># At no-load, I ≈ (B/kt)*ω</span>
<span class="n">I_noload</span>  <span class="o">=</span> <span class="p">(</span><span class="n">B</span><span class="o">/</span><span class="n">kt</span><span class="p">)</span> <span class="o">*</span> <span class="n">omega_0</span>          <span class="c1"># [A]</span>
<span class="n">T_friction</span><span class="o">=</span> <span class="n">kt</span> <span class="o">*</span> <span class="n">I_noload</span>             <span class="c1"># [N·m]  (equals B*ω0)</span>

<span class="n">vals</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;R_ohm&quot;</span><span class="p">:</span> <span class="n">R</span><span class="p">,</span>
    <span class="s2">&quot;B_Nm_s_per_rad&quot;</span><span class="p">:</span> <span class="n">B</span><span class="p">,</span>
    <span class="s2">&quot;ke_Vs_per_rad&quot;</span><span class="p">:</span> <span class="n">ke</span><span class="p">,</span>
    <span class="s2">&quot;kt_Nm_per_A&quot;</span><span class="p">:</span> <span class="n">kt</span><span class="p">,</span>
    <span class="s2">&quot;omega_per_volt_rad_s_per_V&quot;</span><span class="p">:</span> <span class="n">omega_per_volt</span><span class="p">,</span>
    <span class="s2">&quot;rpm_per_volt_RPM_per_V&quot;</span><span class="p">:</span> <span class="n">rpm_per_volt</span><span class="p">,</span>
    <span class="s2">&quot;no_load_speed_rpm_at_3p7V&quot;</span><span class="p">:</span> <span class="n">rpm_0</span><span class="p">,</span>
    <span class="s2">&quot;stall_current_A_at_3p7V&quot;</span><span class="p">:</span> <span class="n">I_stall</span><span class="p">,</span>
    <span class="s2">&quot;stall_torque_Nm_at_3p7V&quot;</span><span class="p">:</span> <span class="n">T_stall</span><span class="p">,</span>
    <span class="s2">&quot;no_load_current_A_est&quot;</span><span class="p">:</span> <span class="n">I_noload</span><span class="p">,</span>
    <span class="s2">&quot;friction_torque_Nm_est&quot;</span><span class="p">:</span> <span class="n">T_friction</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">vals</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">v</span><span class="si">:</span><span class="s2">.6g</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
R_ohm: 2.7
B_Nm_s_per_rad: 3e-08
ke_Vs_per_rad: 0.00075
kt_Nm_per_A: 0.00075
omega_per_volt_rad_s_per_V: 1165.5
rpm_per_volt_RPM_per_V: 11129.7
no_load_speed_rpm_at_3p7V: 41180
stall_current_A_at_3p7V: 1.37037
stall_torque_Nm_at_3p7V: 0.00102778
no_load_current_A_est: 0.172494
friction_torque_Nm_est: 0.000129371
</pre></div></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="pendulum-theory.html" class="btn btn-neutral float-left" title="Aeropendulum (theory)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="motorDC-lab.html" class="btn btn-neutral float-right" title="Motor DC (drive)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, mniehus.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>