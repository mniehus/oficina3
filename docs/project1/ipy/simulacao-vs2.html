

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2. Implementar e testar em Jupyter um simulador de um pêndulo e de um aeropêndulo &mdash; oficina3  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../../_static/nbsphinx-code-cells.css?v=2aa19091" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=f281be69"></script>
      <script src="../../_static/design-tabs.js?v=f930bc37"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            oficina3
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">oficina3</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../readme.html">LEFA Oficina 3 – Laboratório de Estimação e Controlo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../readme.html#lefa-oficina-3-estimation-and-control-lab">LEFA Oficina 3 – Estimation and Control Lab</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Projeto 1</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../aeropendulum.html">Projeto 1: Aeropêndulo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../analogies.html">Analogias &amp; números</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pendulum-theory.html">Aeropendulum (theory)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../motorDC-theory.html">Motor DC (theory)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L298N.html">Modulo L298N</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fsms.html">Máquinas de Estado</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interrupts.html">Interrupções</a></li>
<li class="toctree-l1"><a class="reference internal" href="../motorCalib-PT.html">Calibração &amp; software modular</a></li>
<li class="toctree-l1"><a class="reference internal" href="../as5600.html">Sensor AS5600</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controlador.html">Controlador</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controlo-PID-arduino.html">Controlador PID</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration.html">Integração</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resultados.html">Resultados</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Projeto 2</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../project2/readme.html">Carro programável</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project 3</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../project3/readme.html">Inverted Pendulum</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">oficina3</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">2. Implementar e testar em Jupyter um simulador de um pêndulo e de um aeropêndulo</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/project1/ipy/simulacao-vs2.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="2.-Implementar-e-testar-em-Jupyter-um-simulador-de-um-pêndulo-e-de-um-aeropêndulo">
<h1>2. Implementar e testar em Jupyter um simulador de um pêndulo e de um aeropêndulo<a class="headerlink" href="#2.-Implementar-e-testar-em-Jupyter-um-simulador-de-um-pêndulo-e-de-um-aeropêndulo" title="Link to this heading"></a></h1>
<p>Animação de um pêndulo com anotação dinâmica das forças (da wikipedia):</p>
<p><img alt="Pendulo e forças" src="https://upload.wikimedia.org/wikipedia/commons/2/24/Oscillating_pendulum.gif" /></p>
<p>Animação de um pêndulo com anotação dinâmica de velocidade e aceleração vetorial (da wikipedia):</p>
<p><img alt="Pendulo e forças" src="https://upload.wikimedia.org/wikipedia/commons/2/24/Oscillating_pendulum.gif" /></p>
<p>Observações:</p>
<ul class="simple">
<li><p>referencial cartesiano de laboratório xy é útil para criar visualização, mas para análise deve considerar-se o referencial local de coordenadas <span class="math notranslate nohighlight">\(\theta\)</span> (‘azimutal’, i.e.angular, tangencial) e <span class="math notranslate nohighlight">\(r\)</span> (‘radial’).</p></li>
<li><p>o vetor de velocidade só tem componente azimutal</p></li>
<li><p>o vetor de aceleração tem componente tangencial e radial. Na análise só consideramos a componente azimutal, que a parte radial é sempre compensada pelo ‘braço’ do pêndulo.</p></li>
</ul>
<p>Exercício: Esboçar o andamento com o tempo de ângulo <span class="math notranslate nohighlight">\(\Theta(t)\)</span>, velocidade angular <span class="math notranslate nohighlight">\(\omega(t)=\dot \theta(t)\)</span> e velocidade azimutal e linear <span class="math notranslate nohighlight">\(v(t)=\omega(t) \cdot l\)</span>, e a aceleração <span class="math notranslate nohighlight">\(\alpha(t)=\dot \omega(t)\)</span>.</p>
<section id="Simulação-de-pêndulo-e-aeropêndulo-sem-realimentação-(feedback)">
<h2>Simulação de pêndulo e aeropêndulo sem realimentação (feedback)<a class="headerlink" href="#Simulação-de-pêndulo-e-aeropêndulo-sem-realimentação-(feedback)" title="Link to this heading"></a></h2>
<p>Em geral, a dinâmica de um corpo rígido em rotação numa dimensão (um eixo) é descrita através de:</p>
<div class="math notranslate nohighlight">
\[J \frac{d^2\Theta}{dt^2}=\sum_{i=1}^{n} \tau_i\]</div>
<p>em que:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\Theta\)</span> é o ângulo, e <span class="math notranslate nohighlight">\(\omega=\frac{d\Theta}{dt}\)</span> e <span class="math notranslate nohighlight">\(\alpha=\frac{d^2\Theta}{dt^2}\)</span> velocidade e aceleração ângular</p></li>
<li><p><span class="math notranslate nohighlight">\(J\)</span> é o momentum de inêrcia a calcular pela distribuição da massa em relação ao eixo rotativo.</p></li>
<li><p><span class="math notranslate nohighlight">\(\tau_i\)</span> são os torques/binários parciais, e que são somados.</p></li>
</ul>
<p>A equação differential para o aeropêndulo é:</p>
<div class="math notranslate nohighlight">
\[m l^2 \frac{d^2\Theta}{dt^2} = -m g l sin(\Theta)- b \frac{d\Theta}{dt}+l H(t)\]</div>
<p>em que <span class="math notranslate nohighlight">\(t\)</span> é o tempo, <span class="math notranslate nohighlight">\(\Theta\)</span> é o ângulo do pêndulo em relação à vertical, <span class="math notranslate nohighlight">\(\omega=\dot{\Theta}=\frac{d\Theta}{dt}\)</span> e <span class="math notranslate nohighlight">\(\alpha=\dot{\omega}=\frac{d^2\Theta}{dt^2}\)</span> são a velocidade e aceleração ângular, <span class="math notranslate nohighlight">\(H(t)\)</span> é a força de propulsão da hélice. Os parâmetros do sistema são: a massa <span class="math notranslate nohighlight">\(m\)</span>,, o comprimento <span class="math notranslate nohighlight">\(l\)</span> do pêndulo, e o coeficiente de atrito <span class="math notranslate nohighlight">\(b\)</span>. Os parâmetros são determinados através de medidas diretas (medir peso, medir comprimento, etc.) ou
indiretas, por exemplo ajustando um modelo teórico ao comportamento do sistema em condições reais, i.e. como responde a certos inputs. Finalmente, <span class="math notranslate nohighlight">\(g=9.81 m/s^2\)</span> é o coeficiente gravítico.</p>
<p>As equações diferenciais descrevem a dinâmica do sistema, i.e. como responde à alterações do sinal de entrada (propulsão do hélice), ou alterações do meio ambiente (temperatura, movimento de ar, etc.) ou alterações dos parámetros do sistema (comprimento do braço, atrito no eixo, etc.).</p>
<p>É instrutivo analisar primeiro, como referências iniciais:</p>
<ul class="simple">
<li><p>a solução dinâmica mais simples, isto é linearizada, sem atrito e sem força de propulsão</p></li>
<li><p>a solução estacionária mais simples, com força de propulsão constante e as derivadas nulas</p></li>
</ul>
</section>
</section>
<section id="Solução-dinâmica-linearizada-sem-atrito-e-sem-força-de-propulsão">
<h1>Solução dinâmica linearizada sem atrito e sem força de propulsão<a class="headerlink" href="#Solução-dinâmica-linearizada-sem-atrito-e-sem-força-de-propulsão" title="Link to this heading"></a></h1>
<p>A solução analítica de referência mais simples é a equação linearizada (<span class="math notranslate nohighlight">\(sin(\Theta)\approx \Theta\)</span>) e sem atrito (<span class="math notranslate nohighlight">\(b=0\)</span>) e com força de propulsão nula (<span class="math notranslate nohighlight">\(H=0\)</span>).</p>
<div class="math notranslate nohighlight">
\[\frac{d^2\Theta}{dt^2} = - \frac{g}{l} \Theta\]</div>
<p>Resulta num movimento harmônico sinusoidal com amplitude constante:</p>
<div class="math notranslate nohighlight">
\[\Theta(t)=\Theta_0 sin(2 \pi \frac{t}{T}+\phi_0)\]</div>
<p>em que <span class="math notranslate nohighlight">\(\Theta_0\)</span> e <span class="math notranslate nohighlight">\(\phi_0\)</span> dependem das condições iniciais.</p>
<p>Nesse pêndulo matemátio idealizado, o período (característico) de oscilação não depende da massa <span class="math notranslate nohighlight">\(m\)</span> nem da distribuição da massa, nem da amplitude do movimento. Depende só do comprimento do pêndulo:</p>
<div class="math notranslate nohighlight">
\[T=2 \pi \sqrt{\frac{l}{g}}\]</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[103]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">g</span> <span class="o">=</span> <span class="mf">9.81</span>  <span class="c1"># coeficiente gravítico</span>
<span class="n">length</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">)</span>
<span class="n">period</span><span class="o">=</span><span class="mf">6.28</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">length</span><span class="o">/</span><span class="n">g</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">length</span><span class="p">,</span><span class="n">period</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Length l (m)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Período t (s)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/project1_ipy_simulacao-vs2_5_0.png" src="../../_images/project1_ipy_simulacao-vs2_5_0.png" />
</div>
</div>
</section>
<section id="Solução-estacionária-com-força-de-propulsão-constante-e-as-derivadas-nulas">
<h1>Solução estacionária com força de propulsão constante e as derivadas nulas<a class="headerlink" href="#Solução-estacionária-com-força-de-propulsão-constante-e-as-derivadas-nulas" title="Link to this heading"></a></h1>
<p>Para o caso estacionário, a equação diferencial simplifica para:</p>
<div class="math notranslate nohighlight">
\[m l^2 \cdot 0 = -m g l \cdot sin(\Theta)- b \cdot 0+l H\]</div>
<p>A solução é:</p>
<div class="math notranslate nohighlight">
\[sin(\Theta)=\frac{H}{m g}\]</div>
<p>Ou seja: o ângulo estacionário <span class="math notranslate nohighlight">\(\Theta\)</span> só depende da força propulsão <span class="math notranslate nohighlight">\(H\)</span> e da massa <span class="math notranslate nohighlight">\(m\)</span>, e aumenta à medida da percentagem da força de propulsão com o peso <span class="math notranslate nohighlight">\(m \cdot g\)</span>.</p>
<p>A notar que neste modelo o ângulo estacionário não depende do comprimento do pêndulo, nem da distribuição da massa.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[179]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="c1">#g = 9.81  # coeficiente gravítico em m/s^2</span>
<span class="c1">#m = 0.1 #massa em kg</span>
<span class="n">T</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">)</span> <span class="c1"># em percentage of m*g</span>
<span class="n">teta</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">T</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">T</span><span class="p">,</span><span class="n">teta</span><span class="o">*</span><span class="mi">180</span><span class="o">/</span><span class="mf">3.14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Força de propulsão (em </span><span class="si">% d</span><span class="s1">o peso = m*g)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Angle (deg)&#39;</span><span class="p">)</span>
<span class="c1">#plt.title(&#39;m=0.1 kg&#39;)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/project1_ipy_simulacao-vs2_7_0.png" src="../../_images/project1_ipy_simulacao-vs2_7_0.png" />
</div>
</div>
<p>Para posterior comparação com a experiência, devemos considerar a possibilidade que o atrito não é tanto uma função da velocidade (é o que a equação diferencial assume), mas antes um atrito entre sólidos. Neste caso, o torque de atrito é constante enquanto em movimento, e corresponde a um coeficiente constante de atrito cujo valor depende dos materiais e da qualidade de superficie, e que depende da força normal na superficie de atrito.</p>
<p>Assumindo torque de atrito <span class="math notranslate nohighlight">\(\tau_a\)</span> constante, alteramos a equação diferencial para o caso estacionário:</p>
<div class="math notranslate nohighlight">
\[m l^2 \cdot 0 = -m g l sin(\Theta)- \tau_a+l H\]</div>
<p>A nova solução é:</p>
<div class="math notranslate nohighlight">
\[sin(\Theta)=\frac{H-\tau_a/l}{m g}\]</div>
<p>Solução válida enquanto <span class="math notranslate nohighlight">\(H \geq \tau_a/l\)</span></p>
<p>O gráfico mostra o impacto de atrito estático.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[246]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="c1">#g = 9.81  # coeficiente gravítico em m/s^2</span>
<span class="c1">#m = 0.1 #massa em kg</span>
<span class="c1">#l=0.5 #comprimento pendulo</span>
<span class="n">T</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">)</span> <span class="c1"># em percentage of m*g</span>
<span class="n">tau</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span><span class="mi">20</span><span class="p">)</span> <span class="c1"># em percentage of m*g*l</span>
<span class="n">teta0</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">T</span><span class="o">-</span><span class="n">tau</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span>
<span class="n">teta1</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">T</span><span class="o">-</span><span class="n">tau</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span>
<span class="n">teta2</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">T</span><span class="o">-</span><span class="n">tau</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span>
<span class="n">teta3</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">T</span><span class="o">-</span><span class="n">tau</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span>
<span class="n">teta4</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">T</span><span class="o">-</span><span class="n">tau</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">T</span><span class="p">,</span><span class="n">teta0</span><span class="o">*</span><span class="mi">180</span><span class="o">/</span><span class="mf">3.14</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;$tau_a=0$&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">T</span><span class="p">,</span><span class="n">teta1</span><span class="o">*</span><span class="mi">180</span><span class="o">/</span><span class="mf">3.14</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;$tau_a=0.2 mg/l$&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">T</span><span class="p">,</span><span class="n">teta2</span><span class="o">*</span><span class="mi">180</span><span class="o">/</span><span class="mf">3.14</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;$tau_a=0.4 mg/l$&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">T</span><span class="p">,</span><span class="n">teta3</span><span class="o">*</span><span class="mi">180</span><span class="o">/</span><span class="mf">3.14</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;$tau_a=0.6 mg/l$&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">T</span><span class="p">,</span><span class="n">teta4</span><span class="o">*</span><span class="mi">180</span><span class="o">/</span><span class="mf">3.14</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;$tau_a=0.8 mg/l$&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Força de propulsão (em </span><span class="si">% d</span><span class="s1">o peso = m*g)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Angle (deg)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;(considerar só parte crescente)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/project1_ipy_simulacao-vs2_9_0.png" src="../../_images/project1_ipy_simulacao-vs2_9_0.png" />
</div>
</div>
</section>
<section id="Solução-com-atrito-e-força-de-propulsão-constante-ou-variável">
<h1>Solução com atrito e força de propulsão constante ou variável<a class="headerlink" href="#Solução-com-atrito-e-força-de-propulsão-constante-ou-variável" title="Link to this heading"></a></h1>
<p>A realidade é mais complexa, e é preciso modificar o modelo, para incluir a não-linearidade e o atrito do rolamento, e outros fatores considerados relevantes, como a flutuabilidade e a resistência viscosa do ar, a massa do haste, e em geral a distribuição da massa, a flexibilidade do haste, e outras caracteristicas do suporte mecânico, por exemplo distorção de dimensões.</p>
<p>Seja como for, deve ser definido o modelo teórico e formulada a equação diferencial respetiva.</p>
<p>Equações diferenciais de segunda ordem podem ser resolvidas numéricamente usando a função ‘odeint’ da biblioteca ‘scipy’ do Python.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[238]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy.integrate</span><span class="w"> </span><span class="kn">import</span> <span class="n">odeint</span>

<span class="n">m</span>  <span class="o">=</span> <span class="mf">0.1</span>     <span class="c1"># masse (kg)</span>
<span class="n">l</span>   <span class="o">=</span> <span class="mf">0.5</span>   <span class="c1"># comprimento (m) T = 6.28*sqrt(l/g)</span>
<span class="n">g</span> <span class="o">=</span> <span class="mf">9.81</span>  <span class="c1"># coeficiente gravítico</span>
<span class="n">b</span><span class="o">=</span><span class="mi">5</span>      <span class="c1">#coeficiente de atrito</span>

<span class="n">time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">)</span>

<span class="c1"># força de propulsão H</span>
<span class="k">def</span><span class="w"> </span><span class="nf">lift</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="c1">#return 0</span>
    <span class="k">return</span> <span class="n">m</span><span class="o">*</span><span class="n">g</span><span class="o">/</span><span class="mi">4</span>
    <span class="c1">#return 1*np.sin(np.sqrt(g/l)*1.9*t)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">derivatives</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
    <span class="c1"># input x = [omega, teta]</span>
    <span class="c1">#return [x[1], -g/l*x[0]]  #sem atrito ou propulsão</span>
    <span class="c1">#return [x[1], -g/l*x[0]-b/(m*l**2)*x[1] + 1/(m*l)*lift(t)]  #linearizado</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">-</span><span class="n">g</span><span class="o">/</span><span class="n">l</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">-</span><span class="n">b</span><span class="o">/</span><span class="p">(</span><span class="n">m</span><span class="o">*</span><span class="n">l</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">m</span><span class="o">*</span><span class="n">l</span><span class="p">)</span><span class="o">*</span><span class="n">lift</span><span class="p">(</span><span class="n">t</span><span class="p">)]</span>  <span class="c1">#nao linear</span>
    <span class="c1">#return [x[1], -g/l*np.sin(x[0])-b/(m*l**2) + 1/(m*l)*lift(t)]  #nao linear</span>

<span class="c1"># condições iniciais (teta em rad, omega em rad/s)</span>
<span class="n">CI</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="o">*</span><span class="mf">3.14</span><span class="o">/</span><span class="mi">180</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">teta</span><span class="p">,</span> <span class="n">omega</span> <span class="o">=</span> <span class="n">odeint</span><span class="p">(</span><span class="n">derivatives</span><span class="p">,</span> <span class="n">CI</span><span class="p">,</span> <span class="n">time</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span><span class="n">teta</span><span class="o">*</span><span class="mi">180</span><span class="o">/</span><span class="mf">3.14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Time [s]&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Angle [deg]&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">();</span>

<span class="c1">#Comparar com soluções analíticas !?</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/project1_ipy_simulacao-vs2_11_0.png" src="../../_images/project1_ipy_simulacao-vs2_11_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[241]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span><span class="n">omega</span><span class="o">*</span><span class="mi">180</span><span class="o">/</span><span class="mf">3.14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Time [s]&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Velocity [deg/s]&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/project1_ipy_simulacao-vs2_12_0.png" src="../../_images/project1_ipy_simulacao-vs2_12_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[240]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">_</span><span class="p">,</span> <span class="n">alfa</span> <span class="o">=</span> <span class="n">derivatives</span><span class="p">([</span><span class="n">teta</span><span class="p">,</span> <span class="n">omega</span><span class="p">],</span> <span class="n">time</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">alfa</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;time (s)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;acceleration (rad/s^2)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">#plt.axis((0, 3, -3, 4));</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/project1_ipy_simulacao-vs2_13_0.png" src="../../_images/project1_ipy_simulacao-vs2_13_0.png" />
</div>
</div>
<p>Sugestão de questões para investigação teórica e experimental</p>
<ul class="simple">
<li><p>Investigar variação de parametros: amplitude do movimento, distribuição de masse, movimento do ar, etc.</p></li>
<li><p>o atrito escala mesmo com a magnitude da velocidade ? Não seria melhor um modelo com atrito constante por partes estático/dinâmico entre sólidos ? Como investigar esta hipótese?</p></li>
<li><p>(outras questões de investigação formuladas pelos estudantes)</p></li>
</ul>
<p>Sugestão de variações para investigação teórica e experimental</p>
<ul class="simple">
<li><p>Pendulo forçado com propulsão harmónica (resonancia)</p></li>
</ul>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, mniehus.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>